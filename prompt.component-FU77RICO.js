import{a as ie,b as oe,c as ae,d as re,e as le}from"./chunk-5OUIED4Y.js";import"./chunk-HCU4XVIO.js";import{b as L,g as q,j as z,l as B,r as K,s as W,t as Q,w as R}from"./chunk-B7VOCU5S.js";import{c as j,d as G,e as Y}from"./chunk-NAUQUYNC.js";import"./chunk-NME53Y3J.js";import{g as H,h as J,i as X,j as Z,k as $,l as ee}from"./chunk-H6TYOFTS.js";import{a as te,g as ne}from"./chunk-6TMERT2D.js";import{h as N}from"./chunk-7MWEYH2J.js";import{$a as k,$b as C,Cc as V,Ea as M,Eb as h,Ec as A,Gc as U,Jb as i,Kb as n,Lb as f,Pb as D,Rb as u,Sb as p,Wb as w,Xb as b,Yb as O,ac as r,bc as _,d as P,db as s,ec as v,fc as y,g as S,gc as E,ib as T,jc as I,oa as c,ob as F,pa as m,sb as g,zb as x}from"./chunk-DSW3PZOY.js";var me=["textbox"],de=["fileUpload"],se=o=>({hidden:o});function ge(o,d){o&1&&(i(0,"ul")(1,"li"),r(2," Use Chrome "),i(3,"a",6),r(4,"Canary (min 138.0.7190.0)"),n()(),i(5,"li"),r(6," At least 22 GB of free storage space available. If the available storage space falls below 10 GB after the download, the model will be deleted. While the model requires far less storage (around a couple of GB), this requirement exists to ensure you have an ample storage margin. "),n(),i(7,"li"),r(8," Enable the following chrome flags: "),i(9,"ul")(10,"li"),r(11," #prompt-api-for-gemini-nano and/or #prompt-api-for-gemini-nano-multimodal-input "),n(),i(12,"li"),r(13,' #optimization-guide-on-device-model (set to "Enabled BypassPerfRequirement") '),n()()()())}function ue(o,d){o&1&&(i(0,"span"),r(1,"Describe the image"),n())}function xe(o,d){o&1&&(i(0,"span",28),r(1,"Ask the chef"),n(),f(2,"img",29)(3,"img",30))}function fe(o,d){if(o&1&&(i(0,"div",31),f(1,"img",32),n()),o&2){let e=p(2);s(),x("src",e.imagePreviewUrl,k)}}function _e(o,d){if(o&1&&(i(0,"div",26)(1,"pre"),r(2),n()()),o&2){let e=p(2);s(2),_(e.result)}}function he(o,d){if(o&1&&(i(0,"span",27),r(1),n()),o&2){let e=p(2);s(),_(e.errorMessage)}}function Ce(o,d){if(o&1){let e=D();i(0,"div",7)(1,"h1"),r(2,"\u{1F1EE}\u{1F1F9} Ask a recipe to chef Luigi \u{1F1EE}\u{1F1F9}"),n(),i(3,"div",8)(4,"div",9)(5,"mat-form-field",10)(6,"mat-label"),r(7,"Temperature"),n(),i(8,"input",11),E("ngModelChange",function(t){c(e);let l=p();return y(l.temperature,t)||(l.temperature=t),m(t)}),n()(),i(9,"mat-form-field",10)(10,"mat-label"),r(11,"Top-K"),n(),i(12,"input",11),E("ngModelChange",function(t){c(e);let l=p();return y(l.topK,t)||(l.topK=t),m(t)}),n()()(),i(13,"div",12),f(14,"img",13),n()(),i(15,"div",14)(16,"div",15)(17,"textarea",16,0),u("keydown.shift.enter",function(t){c(e);let l=C(18),pe=p();return m(pe.sendKeyPrompt(t,l.value))}),n(),i(19,"div",17),r(20,"\u{1F373}"),n()()(),i(21,"div",18)(22,"button",19),u("click",function(){c(e);let t=C(18),l=p();return m(l.sendPrompt(t.value))}),g(23,ue,2,0,"span")(24,xe,4,0),n(),i(25,"input",20,1),u("change",function(t){c(e);let l=p();return m(l.onImageSelected(t))}),n(),i(27,"div",21)(28,"button",22),u("click",function(){c(e);let t=C(26);return m(t.click())}),f(29,"img",23),n(),i(30,"span"),r(31),n(),i(32,"img",24),u("click",function(){c(e);let t=p();return m(t.removeImage())}),n()()(),g(33,fe,2,1,"div",25),n(),g(34,_e,3,1,"div",26)(35,he,2,1,"span",27)}if(o&2){let e=p();s(8),v("ngModel",e.temperature),s(4),v("ngModel",e.topK),s(3),x("ngClass",I(8,se,!!e.imageFile)),s(8),h(e.imageFile?23:24),s(8),_(e.imageFile==null?null:e.imageFile.name),s(),x("ngClass",I(10,se,!e.imageFile)),s(),x("ngIf",e.imagePreviewUrl),s(),h(!e.errorMessage&&e.result?34:35)}}function Pe(o,d){if(o&1&&(i(0,"span"),r(1),n()),o&2){let e=p();s(),_(e.unsupportedText)}}var Be=(()=>{class o{constructor(e){this.titleService=e,this.imagePreviewUrl=null,this.temperature=M(.7),this.topK=M(3),this.languageModelCreateOptions={temperature:this.temperature(),topK:this.topK(),initialPrompts:[{role:"system",content:`You are an expert italian chef, proud of your country recipes, able to provide culinary advice and ingredient list from the provided images.#fileUpload
                If the requested recipe is not Italian, you will start your response with 'Ahi ahi, mamma mia cosa mi chiedi.' .`}],expectedInputs:[{type:"audio"},{type:"image"}]},this.titleService.setTitle("Prompt API")}ngOnInit(){return P(this,null,function*(){try{if("LanguageModel"in self){let e=yield LanguageModel.availability();if(e==="unavailable"){this.unsupportedText="The Prompt API isn't usable. This could be for a number of reasons, such as insufficient available disk space to download the model.";return}else e==="available"?this.session||(this.session=yield LanguageModel.create(this.languageModelCreateOptions)):this.session||(this.session=yield LanguageModel.create({expectedInputs:[{type:"audio"},{type:"image"}],monitor(a){a.addEventListener("downloadprogress",t=>{console.log(`Downloaded ${t.loaded*100}%`)})}}))}else this.unsupportedText="The Prompt API is not supported in your browser."}catch(e){this.unsupportedText="An error occurred while checking Prompt API support in your browser.",console.error(e)}})}sendPrompt(e){return P(this,null,function*(){if(!this.session||!e&&!this.imageFile)return;let a={role:"user",content:[{type:this.imageFile?"image":"text",value:e}]},t={role:"user",content:[{type:"text",value:"Provide a description of the uploaded image and list the ingredients needed to make the dish:"},{type:"image",value:this.imageFile}]};this.result="",this.textbox.nativeElement.value="";let l=this.session.promptStreaming([this.imageFile?t:a]);try{for(var pe=S(l),Qe,Re,Ne;Qe=!(Re=yield pe.next()).done;Qe=!1){let ce=Re.value;this.result+=ce}}catch{Ne=[Re]}finally{try{Qe&&(Re=pe.return)&&(yield Re.call(pe))}finally{if(Ne)throw Ne[0]}}console.log(`${this.session.inputUsage} tokens used, out of ${this.session.inputQuota} tokens available.`)})}onImageSelected(e){let a=e.target;if(this.imageFile=a?.files?.[0],this.result="",this.imageFile){let t=new FileReader;t.onload=()=>{this.imagePreviewUrl=t.result},t.readAsDataURL(this.imageFile)}else this.removeImage();this.fileUpload.nativeElement.value=""}removeImage(){this.imageFile=void 0,this.imagePreviewUrl=null,this.result=""}sendKeyPrompt(e,a){e.preventDefault(),this.sendPrompt(a)}static{this.\u0275fac=function(a){return new(a||o)(T(N))}}static{this.\u0275cmp=F({type:o,selectors:[["app-prompt"]],viewQuery:function(a,t){if(a&1&&(w(me,5),w(de,5)),a&2){let l;b(l=O())&&(t.textbox=l.first),b(l=O())&&(t.fileUpload=l.first)}},decls:15,vars:1,consts:[["textbox",""],["fileUpload",""],[1,"content"],[1,"descr-card"],[1,"prompt-prereq"],["matExpansionPanelContent",""],["href","https://www.google.com/chrome/canary/","target","_blank"],[1,"inner-content"],[1,"header"],[1,"options-fields"],["appearance","outline"],["matInput","","type","number","min","0","max","1","step","0.1","maxlength","3",3,"ngModelChange","ngModel"],[1,"icon-chef-wrap"],["src","assets/icons/chef.png","alt","Chef Icon"],[1,"textarea-container",3,"ngClass"],[1,"textarea-wrapper"],["name","textbox","id","textbox","rows","4","placeholder","Enter the prompt for the master chef",3,"keydown.shift.enter"],[1,"cooking-icon"],[1,"buttons-box"],["color","primary","mat-raised-button","",3,"click"],["type","file","accept","image/*",1,"file-input",3,"change"],[1,"file-upload"],["mat-mini-fab","","color","primary",1,"upload-btn",3,"click"],["src","assets/icons/imagesmode.png","alt","Image","width","24","height","24","title","Upload an image"],["src","assets/icons/delete.png","alt","Delete","width","24","height","24","title","Remove the image",3,"click","ngClass"],["class","image-preview",4,"ngIf"],[1,"result"],[1,"error-text"],[1,"btn-text"],["src","assets/icons/shift.png","alt","Image","width","18","height","18","title","Shift key"],["src","assets/icons/return.png","alt","Image","width","18","height","18","title","Return key"],[1,"image-preview"],["alt","Image preview",3,"src"]],template:function(a,t){a&1&&(i(0,"section",2)(1,"h1"),r(2,"Prompt API"),n(),i(3,"mat-card",3)(4,"p"),r(5," This API is part of Chrome built-in AI APIs. With them, a web application can perform AI-powered tasks, without needing to deploy, manage, or self-host AI models. The Prompt API supports text, audio and image as inputs, while returning text as output results. "),n(),i(6,"mat-accordion")(7,"mat-expansion-panel",4)(8,"mat-expansion-panel-header")(9,"mat-panel-title")(10,"h2"),r(11,"Prerequisites"),n()()(),g(12,ge,14,0,"ng-template",5),n()()(),g(13,Ce,36,12)(14,Pe,2,1,"span"),n()),a&2&&(s(13),h(t.unsupportedText?14:13))},dependencies:[U,V,A,ne,te,Y,j,G,ee,$,J,X,Z,H,ae,oe,ie,le,re,R,L,B,q,Q,W,K,z],styles:['.inner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.25em;text-align:center;margin:1rem 0}.inner-content[_ngcontent-%COMP%]   .textarea-container[_ngcontent-%COMP%]{padding:2rem;margin-bottom:1.5rem;background:linear-gradient(135deg,#ffecd2,#fcb69f);display:flex;align-items:center;justify-content:center;font-family:Georgia,serif}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]{position:relative;max-width:500px;width:100%;display:flex}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:25px 30px 25px 25px;border:none;border-radius:15px;background:#fff8f0;box-shadow:0 8px 32px #0000001a,inset 0 2px 4px #fffc,0 0 0 3px #e8b4a0;font-size:16px;line-height:1.6;color:#5d4037;resize:vertical;transition:all .3s ease;background-image:repeating-linear-gradient(transparent,transparent 24px,rgba(139,69,19,.1) 24px,rgba(139,69,19,.1) 26px)}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 12px 40px #00000026,inset 0 2px 4px #ffffffe6,0 0 0 4px #d4a574,0 0 20px #d4a5744d;transform:translateY(-2px)}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#a1887f;font-style:italic;opacity:.8}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .cooking-icon[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-8px;font-size:32px;background:#ff8a65;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #ff8a654d;transition:all .3s ease;cursor:default}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .cooking-icon[_ngcontent-%COMP%]:hover{transform:rotate(15deg) scale(1.1);box-shadow:0 6px 16px #ff8a6566}.inner-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:radial-gradient(circle at 1px 1px,rgba(139,69,19,.05) 1px,transparent 0);background-size:20px 20px;pointer-events:none;border-radius:15px}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:end;justify-content:center}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .options-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .options-fields[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:120px}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .options-fields[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]:first-child{margin-right:1.5rem}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-chef-wrap[_ngcontent-%COMP%]{width:120px}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-chef-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.inner-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-bottom:1.5rem}.inner-content[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:red;font-weight:600;margin-top:1rem}.inner-content[_ngcontent-%COMP%]   .buttons-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.inner-content[_ngcontent-%COMP%]   .buttons-box[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{margin-right:.5rem}.inner-content[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{display:flex;align-items:center}.inner-content[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f85f31;font-weight:600;margin-left:.5rem}.inner-content[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:450px;max-height:450px;margin-top:1rem}.inner-content[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%], .inner-content[_ngcontent-%COMP%]   .buttons-box[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.prompt-prereq[_ngcontent-%COMP%]{border:0!important;box-shadow:none!important}.prompt-prereq[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding-left:0!important}.result[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border-radius:8px;border:1px solid #c5c5c5;box-shadow:0 2px 4px #0000001a}.result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{text-wrap:wrap}@media (max-width: 600px){.inner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}.container[_ngcontent-%COMP%]{padding:20px}textarea[_ngcontent-%COMP%]{padding:20px 25px 20px 20px;font-size:14px}.cooking-icon[_ngcontent-%COMP%]{width:35px;height:35px;font-size:20px;top:12px;right:12px}}']})}}return o})();export{Be as PromptComponent};
