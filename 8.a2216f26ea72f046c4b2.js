(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{MWW1:function(e,t,n){"use strict";n.r(t),n.d(t,"FileSystemModule",(function(){return P}));var i=n("otUU"),o=n("ofXK"),s=n("tyNb"),c=n("mrSG"),a=n("fXoL"),r=n("jhN1"),l=n("Wp6s"),b=n("7EHt"),d=n("bTqV");const p=["textbox"];function m(e,t){if(1&e&&(a.Ob(0),a.sc(1),a.Nb()),2&e){const e=a.ac(2);a.zb(1),a.uc("File opened: ",e.fileHandle.name,"")}}function u(e,t){if(1&e){const e=a.Rb();a.Qb(0,"button",21),a.Wb("click",(function(){a.jc(e),a.ac();const t=a.gc(12);return a.ac().saveFile(t.value)})),a.Lb(1,"img",22),a.sc(2," Save "),a.Pb()}}function h(e,t){if(1&e){const e=a.Rb();a.Qb(0,"div",10),a.Qb(1,"p",11),a.qc(2,m,2,1,"ng-container",12),a.Pb(),a.Qb(3,"div",13),a.Qb(4,"button",14),a.Wb("click",(function(){return a.jc(e),a.ac().openFile()})),a.Lb(5,"img",15),a.sc(6," Open "),a.Pb(),a.Qb(7,"button",14),a.Wb("click",(function(){a.jc(e);const t=a.gc(12);return a.ac().saveAs(t.value)})),a.Lb(8,"img",16),a.sc(9," Save as "),a.Pb(),a.qc(10,u,3,0,"button",17),a.Pb(),a.Lb(11,"textarea",18,19),a.Qb(13,"cite"),a.sc(14,"For demo purposes, only .txt files are accepted."),a.Pb(),a.Qb(15,"p",20),a.sc(16),a.Pb(),a.Pb()}if(2&e){const e=a.ac();a.zb(2),a.dc("ngIf",e.fileHandle),a.zb(8),a.dc("ngIf",e.fileHandle),a.zb(6),a.uc(" ",e.errorText," ")}}function f(e,t){if(1&e&&(a.Qb(0,"h2"),a.sc(1),a.Pb()),2&e){const e=a.ac();a.zb(1),a.tc(e.unsupportedText)}}function g(e,t){1&e&&(a.Qb(0,"div",23),a.Lb(1,"img",24),a.Pb(),a.Lb(2,"br"),a.Lb(3,"br"),a.Qb(4,"a",25),a.sc(5,"Source: can I use"),a.Pb())}const v=[{path:"",component:(()=>{class e{constructor(e){this.titleService=e,this.titleService.setTitle("File System")}ngOnInit(){"chooseFileSystemEntries"in window||"showOpenFilePicker"in window||(this.unsupportedText="Your browser does not support File System Access API or you did not activate the Chrome flag.")}ngAfterViewInit(){this.textAreaElement=this.textarea.nativeElement}openFile(){return Object(c.a)(this,void 0,void 0,(function*(){try{this.fileHandle=yield this.getFileHandle();const e=yield this.fileHandle.getFile();this.textAreaElement.value=yield e.text()}catch(e){this.errorText=e.message,console.error(e.name,e.message)}}))}saveFile(e){return Object(c.a)(this,void 0,void 0,(function*(){try{if(!this.fileHandle)return yield this.saveAs(e);yield this.writeTextFile(this.fileHandle,e)}catch(t){this.errorText=t.message,console.error(t.name,t.message)}}))}saveAs(e){return Object(c.a)(this,void 0,void 0,(function*(){try{this.fileHandle=yield this.getNewFileHandle(),yield this.writeTextFile(this.fileHandle,e)}catch(t){this.errorText=t.message,console.error(t.name,t.message)}}))}writeTextFile(e,t){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield e.createWritable();n.write(t),n.close()}))}getFileHandle(){const e=this.getFilePickerOptions();return"showOpenFilePicker"in window?window.showOpenFilePicker(e).then(e=>e[0]):window.chooseFileSystemEntries(e)}getNewFileHandle(){let e={};return"showSaveFilePicker"in window?(e=this.getFilePickerOptions(),window.showSaveFilePicker(e)):(e=this.getFilePickerOptions("save-file"),window.chooseFileSystemEntries(e))}getFilePickerOptions(e="open-file"){return"showSaveFilePicker"in window?{types:[{description:"Text files",accept:{"text/plain":[".txt"]}}]}:{type:e,accepts:[{description:"Text files",mimeTypes:["text/plain"],extensions:["txt"]}]}}}return e.\u0275fac=function(t){return new(t||e)(a.Kb(r.c))},e.\u0275cmp=a.Eb({type:e,selectors:[["app-file-system"]],viewQuery:function(e,t){var n;1&e&&a.vc(p,!0),2&e&&a.fc(n=a.Xb())&&(t.textarea=n.first)},decls:31,vars:2,consts:[[1,"content"],[1,"descr-card"],[1,"flex-centered"],["src","assets/icons/lock.png","width","24","height","24","alt","lock icon",1,"icon-space"],["src","assets/icons/warning.png","width","24","height","24","alt","warning icon",1,"icon-space"],["class","native-demo",4,"ngIf","ngIfElse"],["noSupported",""],[1,"accordion-container"],["multi","",1,"example-headers-align"],["matExpansionPanelContent",""],[1,"native-demo"],[1,"file-name"],[4,"ngIf"],[1,"action-bar"],["mat-raised-button","",3,"click"],["src","assets/icons/folder_open.png","width","24","height","24","alt","folder_open icon",1,"icon-space"],["src","assets/icons/playlist_add.png","width","24","height","24","alt","playlist_add icon",1,"icon-space"],["color","primary","mat-raised-button","",3,"click",4,"ngIf"],["name","textbox","id","textbox","rows","15","placeholder"," Start digiting your biography and save it for the future generations... \ud83d\udc47"],["textbox",""],[1,"error"],["color","primary","mat-raised-button","",3,"click"],["src","assets/icons/save.png","width","24","height","24","alt","save icon",1,"icon-space"],[1,"img-container"],["src","assets/images/native-file.png","alt","Native File System api support"],["href","https://caniuse.com/native-filesystem-api","target","_blank"]],template:function(e,t){if(1&e&&(a.Qb(0,"section",0),a.Qb(1,"h1"),a.sc(2,"File System Access API"),a.Pb(),a.Qb(3,"mat-card",1),a.Qb(4,"p"),a.sc(5,"The "),a.Qb(6,"strong"),a.sc(7,"File System Access API"),a.Pb(),a.sc(8," offers new features to manipulate local files providing an improved experience to our users like a native app. We don't have to download the file each time we want to edit it, but we can save it directly. We can even implement an auto-save functionality. "),a.Lb(9,"br"),a.Lb(10,"br"),a.Qb(11,"span",2),a.Lb(12,"img",3),a.Qb(13,"span"),a.sc(14,"This feature is available only over secure connections (HTTPS) and through user interaction."),a.Pb(),a.Pb(),a.Lb(15,"br"),a.Qb(16,"span",2),a.Lb(17,"img",4),a.sc(18," Active by default from Chrome 86. "),a.Pb(),a.sc(19," In older Chrome versions you might need to enable the related flag in Chrome to test it (chrome://flags/#native-file-system-api). "),a.Pb(),a.Pb(),a.qc(20,h,17,3,"div",5),a.qc(21,f,2,1,"ng-template",null,6,a.rc),a.Qb(23,"div",7),a.Qb(24,"mat-accordion",8),a.Qb(25,"mat-expansion-panel"),a.Qb(26,"mat-expansion-panel-header"),a.Qb(27,"mat-panel-title"),a.Qb(28,"h1"),a.sc(29,"Browser compatibility"),a.Pb(),a.Pb(),a.Pb(),a.qc(30,g,6,0,"ng-template",9),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&e){const e=a.gc(22);a.zb(20),a.dc("ngIf",!t.unsupportedText)("ngIfElse",e)}},directives:[l.a,o.j,b.a,b.c,b.e,b.f,b.d,d.a],styles:[".native-demo[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]{margin-bottom:1rem}.native-demo[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1rem}.native-demo[_ngcontent-%COMP%]   .action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.native-demo[_ngcontent-%COMP%]   p.file-name[_ngcontent-%COMP%]{height:20px}.native-demo[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%}"]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({factory:function(t){return new(t||e)},imports:[[s.b.forChild(v)],s.b]}),e})(),P=(()=>{class e{}return e.\u0275mod=a.Ib({type:e}),e.\u0275inj=a.Hb({factory:function(t){return new(t||e)},imports:[[o.b,w,i.a]]}),e})()}}]);