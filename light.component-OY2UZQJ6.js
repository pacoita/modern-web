import{g as O,h as A,i as L,j as I,k as y,l as k}from"./chunk-H6TYOFTS.js";import{a as N,b as R,c as D,g as V}from"./chunk-6TMERT2D.js";import{h as w}from"./chunk-7MWEYH2J.js";import{$a as M,$b as f,Cc as P,Ec as v,Jb as i,Kb as r,Lb as l,Mb as p,Nb as x,Sb as d,ac as n,bc as u,cc as S,d as b,db as o,ib as h,lc as _,ob as E,oc as T,sb as g,zb as c}from"./chunk-DSW3PZOY.js";function F(t,s){if(t&1&&(p(0),n(1),x()),t&2){let e=d(2);o(),S(" ",e.luxValue," ")}}function j(t,s){t&1&&n(0,"N/A")}function z(t,s){if(t&1&&(p(0),i(1,"h2",4),n(2),r(),i(3,"mat-card",14)(4,"mat-card-title")(5,"h2"),n(6,"Light level"),r()(),i(7,"mat-card-content")(8,"h1"),g(9,F,2,1,"ng-container",10)(10,j,1,0,"ng-template",null,1,_),r()()(),x()),t&2){let e=f(11),a=d();o(2),u(a.errorText),o(7),c("ngIf",a.luxValue)("ngIfElse",e)}}function q(t,s){if(t&1&&(i(0,"h2"),n(1),r()),t&2){let e=d();o(),u(e.supportedText)}}function B(t,s){t&1&&(i(0,"div",15),l(1,"img",16),r(),l(2,"br")(3,"br"),i(4,"a",17),n(5,"Source: can I use"),r(),l(6,"br")(7,"br"),i(8,"a",18),n(9,"Night icons created by Freepik - Flaticon"),r())}var W=(()=>{class t{constructor(e,a){this.cdRef=e,this.titleService=a,this.ambient="bright",this.titleService.setTitle("Ambient light")}ngOnInit(){"AmbientLightSensor"in window?this.readAmbientLight():this.supportedText="Your browser does not support Ambient Device Light Sensor \u{1F622}"}readAmbientLight(){try{let e=new window.AmbientLightSensor;e.onerror=a=>b(this,null,function*(){if(a.error.name==="NotAllowedError"){if((yield navigator.permissions.query({name:"ambient-light-sensor"})).state==="denied"){this.errorText="Permission to access sensor was denied.",this.luxValue=void 0;return}this.readAmbientLight()}else a.error.name==="NotReadableError"&&(this.errorText="Cannot connect to the sensor.");this.luxValue=void 0}),e.onreading=()=>{this.updateTheme(e.illuminance)},e.start()}catch(e){this.errorText="An error occurred.",console.error(e)}}updateTheme(e){e<=50?this.ambient="dark":this.ambient="bright",this.luxValue=e,this.cdRef.detectChanges()}static{this.\u0275fac=function(a){return new(a||t)(h(T),h(w))}}static{this.\u0275cmp=E({type:t,selectors:[["app-light"]],decls:34,vars:4,consts:[["noSupported",""],["notAvailable",""],[1,"content","container",3,"ngClass"],[1,"warn-text"],[1,"label"],[1,"image"],["width","64","alt","sun or moon icon",3,"src"],[1,"descr-card"],[1,"flex-centered"],["src","assets/icons/warning.png","width","24","height","24","alt","warning icon",1,"icon-space"],[4,"ngIf","ngIfElse"],[1,"accordion-container"],["multi","",1,"example-headers-align"],["matExpansionPanelContent",""],[1,"lux-card"],[1,"img-container"],["src","assets/images/ambientlight.png","alt","Ambient Light Sensor api support"],["href","https://caniuse.com/?search=ambient%20light","target","_blank"],["href","https://www.flaticon.com/free-icons/night","title","night icons"]],template:function(a,m){if(a&1&&(i(0,"section",2)(1,"div",3)(2,"h1",4),n(3,"Ambient Light Sensor"),r(),i(4,"div",5),l(5,"img",6),r()(),i(6,"mat-card",7)(7,"p"),n(8,"The "),i(9,"strong"),n(10,"AmbientLightSensor"),r(),n(11," interface of the Sensor API returns the current level of the ambient light around the hosting device. "),l(12,"br")(13,"br"),i(14,"span",8),l(15,"img",9),i(16,"span"),n(17,"Still in developer trial"),r()(),n(18," Enable the "),i(19,"cite")(20,"strong"),n(21,"generic sensor extra classes"),r()(),n(22," flag in Chrome to test it (chrome://flags/#enable-generic-sensor-extra-classes). "),r()(),g(23,z,12,3,"ng-container",10)(24,q,2,1,"ng-template",null,0,_),i(26,"div",11)(27,"mat-accordion",12)(28,"mat-expansion-panel")(29,"mat-expansion-panel-header")(30,"mat-panel-title")(31,"h1"),n(32,"Browser compatibility"),r()()(),g(33,B,10,0,"ng-template",13),r()()()()),a&2){let C=f(25);c("ngClass",m.ambient==="bright"?"lightTheme":"darkTheme"),o(5),c("src","assets/images/"+(m.ambient==="bright"?"sun":"night")+".png",M),o(18),c("ngIf",!m.supportedText)("ngIfElse",C)}},dependencies:[P,V,N,D,R,v,k,y,A,L,I,O],styles:[".warn-text[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:2rem}.warn-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 2rem 0 0}.generic-value-light[_ngcontent-%COMP%], .container.darkTheme[_ngcontent-%COMP%]   .lux-card[_ngcontent-%COMP%], .container.lightTheme[_ngcontent-%COMP%]   .lux-card[_ngcontent-%COMP%]{text-align:center;max-width:900px}.generic-value-light[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container.darkTheme[_ngcontent-%COMP%]   .lux-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container.lightTheme[_ngcontent-%COMP%]   .lux-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:1.5rem;font-size:5em;color:#d0d0d0}.container[_ngcontent-%COMP%]{padding:1rem}.container.lightTheme[_ngcontent-%COMP%]{background-color:#fff;color:#000000de}.container.darkTheme[_ngcontent-%COMP%]{background-color:#000000ab}.container.darkTheme[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#fff}"]})}}return t})();export{W as LightComponent};
