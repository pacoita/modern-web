import{a as ne,b as ie,c as oe,d as ae,e as re}from"./chunk-5OUIED4Y.js";import"./chunk-HCU4XVIO.js";import{b as z,g as D,j as B,l as K,r as q,s as W,t as N,w as Q}from"./chunk-B7VOCU5S.js";import{c as R,d as G,e as j}from"./chunk-5WNGUU2R.js";import"./chunk-NME53Y3J.js";import{g as Y,h as H,i as J,j as X,k as Z,l as $}from"./chunk-EH3GIMEI.js";import{a as ee,g as te}from"./chunk-6TMERT2D.js";import"./chunk-LAR6TP5T.js";import{$a as E,$b as h,Cc as A,Ea as P,Eb as M,Ec as U,Gc as L,Jb as i,Kb as n,Lb as _,Pb as k,Rb as d,Sb as p,Wb as I,Xb as T,Yb as F,ac as r,bc as f,cc as V,d as C,db as s,ec as w,fc as b,g as y,gc as O,jc as v,oa as c,ob as S,pa as m,sb as x,zb as u}from"./chunk-DSW3PZOY.js";var ce=["textbox"],le=o=>({hidden:o});function me(o,g){o&1&&(i(0,"ul")(1,"li"),r(2," Use Chrome "),i(3,"a",6),r(4,"Canary (min 138.0.7190.0)"),n()(),i(5,"li"),r(6," At least 22 GB of free storage space available. If the available storage space falls below 10 GB after the download, the model will be deleted. While the model requires far less storage (around a couple of GB), this requirement exists to ensure you have an ample storage margin. "),n(),i(7,"li"),r(8," Enable the following chrome flags: "),i(9,"ul")(10,"li"),r(11," #prompt-api-for-gemini-nano and/or #prompt-api-for-gemini-nano-multimodal-input "),n(),i(12,"li"),r(13,' #optimization-guide-on-device-model (set to "Enabled BypassPerfRequirement") '),n()()()())}function de(o,g){if(o&1&&(i(0,"div",28),_(1,"img",29),n()),o&2){let e=p(2);s(),u("src",e.imagePreviewUrl,E)}}function ge(o,g){if(o&1&&(i(0,"div",26)(1,"pre"),r(2),n()()),o&2){let e=p(2);s(2),f(e.result)}}function xe(o,g){if(o&1&&(i(0,"span",27),r(1),n()),o&2){let e=p(2);s(),f(e.errorMessage)}}function ue(o,g){if(o&1){let e=k();i(0,"div",7)(1,"h1"),r(2,"Ask anything to chef Luigi"),n(),i(3,"div",8)(4,"div",9)(5,"mat-form-field",10)(6,"mat-label"),r(7,"Temperature"),n(),i(8,"input",11),O("ngModelChange",function(t){c(e);let l=p();return b(l.temperature,t)||(l.temperature=t),m(t)}),n()(),i(9,"mat-form-field",10)(10,"mat-label"),r(11,"Top-K"),n(),i(12,"input",11),O("ngModelChange",function(t){c(e);let l=p();return b(l.topK,t)||(l.topK=t),m(t)}),n()()(),i(13,"div",12),_(14,"img",13),n()(),i(15,"div",14)(16,"div",15)(17,"textarea",16,0),d("keydown.shift.enter",function(t){c(e);let l=h(18),se=p();return m(se.sendKeyPrompt(t,l.value))}),n(),i(19,"div",17),r(20,"\u{1F373}"),n()()(),i(21,"div",18)(22,"button",19),d("click",function(){c(e);let t=h(18),l=p();return m(l.sendPrompt(t.value))}),r(23),n(),i(24,"input",20,1),d("change",function(t){c(e);let l=p();return m(l.onImageSelected(t))}),n(),i(26,"div",21)(27,"button",22),d("click",function(){c(e);let t=h(25);return m(t.click())}),_(28,"img",23),n(),i(29,"span"),r(30),n(),i(31,"img",24),d("click",function(){c(e);let t=p();return m(t.removeImage())}),n()()(),x(32,de,2,1,"div",25),n(),x(33,ge,3,1,"div",26)(34,xe,2,1,"span",27)}if(o&2){let e=p();s(8),w("ngModel",e.temperature),s(4),w("ngModel",e.topK),s(3),u("ngClass",v(8,le,!!e.imageFile)),s(8),V(" ",e.imageFile?"Describe the image":"Ask the chef!"," "),s(7),f(e.imageFile==null?null:e.imageFile.name),s(),u("ngClass",v(10,le,!e.imageFile)),s(),u("ngIf",e.imagePreviewUrl),s(),M(!e.errorMessage&&e.result?33:34)}}function fe(o,g){if(o&1&&(i(0,"span"),r(1),n()),o&2){let e=p();s(),f(e.unsupportedText)}}var Ue=(()=>{class o{constructor(){this.imagePreviewUrl=null,this.temperature=P(.7),this.topK=P(3),this.languageModelCreateOptions={temperature:this.temperature(),topK:this.topK(),initialPrompts:[{role:"system",content:"You are an expert italian chef, proud of your country recipes, able to provide culinary advice and ingredient list from the provided images"}],expectedInputs:[{type:"audio"},{type:"image"}]}}ngOnInit(){return C(this,null,function*(){if("LanguageModel"in self){let e=yield LanguageModel.availability();if(e==="unavailable"){this.unsupportedText="The Prompt API isn't usable. This could be for a number of reasons, such as insufficient available disk space to download the model.";return}else e==="available"?this.session||(this.session=yield LanguageModel.create(this.languageModelCreateOptions)):this.session||(this.session=yield LanguageModel.create({expectedInputs:[{type:"audio"},{type:"image"}],monitor(a){a.addEventListener("downloadprogress",t=>{console.log(`Downloaded ${t.loaded*100}%`)})}}))}else this.unsupportedText="The Prompt API is not supported in your browser."})}sendPrompt(e){return C(this,null,function*(){if(!this.session||!e&&!this.imageFile)return;let a={role:"user",content:[{type:this.imageFile?"image":"text",value:e}]},t={role:"user",content:[{type:"text",value:"Provide a description of the upoloaded image and list the ingredients needed to make the dish:"},{type:"image",value:this.imageFile}]};this.result="",this.textbox.nativeElement.value="";let l=this.session.promptStreaming([this.imageFile?t:a]);try{for(var se=y(l),De,Be,Ke;De=!(Be=yield se.next()).done;De=!1){let pe=Be.value;this.result+=pe}}catch{Ke=[Be]}finally{try{De&&(Be=se.return)&&(yield Be.call(se))}finally{if(Ke)throw Ke[0]}}console.log(`${this.session.inputUsage} tokens used, out of ${this.session.inputQuota} tokens available.`)})}onImageSelected(e){let a=e.target;if(this.imageFile=a?.files?.[0],this.result="",this.imageFile){let t=new FileReader;t.onload=()=>{this.imagePreviewUrl=t.result},t.readAsDataURL(this.imageFile)}else this.removeImage()}removeImage(){this.imageFile=void 0,this.imagePreviewUrl=null}sendKeyPrompt(e,a){e.preventDefault(),this.sendPrompt(a)}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=S({type:o,selectors:[["app-prompt"]],viewQuery:function(a,t){if(a&1&&I(ce,5),a&2){let l;T(l=F())&&(t.textbox=l.first)}},decls:15,vars:1,consts:[["textbox",""],["fileUpload",""],[1,"content"],[1,"descr-card"],[1,"prompt-prereq"],["matExpansionPanelContent",""],["href","https://www.google.com/chrome/canary/","target","_blank"],[1,"inner-content"],[1,"header"],[1,"options-fields"],["appearance","outline"],["matInput","","type","number","min","0","max","1","step","0.1","maxlength","3",3,"ngModelChange","ngModel"],[1,"icon-chef-wrap"],["src","assets/icons/chef.png","alt","Chef Icon"],[1,"textarea-container",3,"ngClass"],[1,"textarea-wrapper"],["name","textbox","id","textbox","rows","4","placeholder","Enter the prompt for the master chef",3,"keydown.shift.enter"],[1,"cooking-icon"],[1,"buttons-box"],["color","primary","mat-raised-button","",3,"click"],["type","file","accept","image/*",1,"file-input",3,"change"],[1,"file-upload"],["mat-mini-fab","","color","primary",1,"upload-btn",3,"click"],["src","assets/icons/imagesmode.png","alt","Image","width","24","height","24","title","Upload an image"],["src","assets/icons/delete.png","alt","Delete","width","24","height","24","title","Remove the image",3,"click","ngClass"],["class","image-preview",4,"ngIf"],[1,"result"],[1,"error-text"],[1,"image-preview"],["alt","Image preview",3,"src"]],template:function(a,t){a&1&&(i(0,"section",2)(1,"h1"),r(2,"Prompt API"),n(),i(3,"mat-card",3)(4,"p"),r(5," This API is part of Chrome built-in AI APIs. With them, a web application can perform AI-powered tasks, without needing to deploy, manage, or self-host AI models. The Prompt API supports text, audio and image as inputs, while returning text as output results. "),n(),i(6,"mat-accordion")(7,"mat-expansion-panel",4)(8,"mat-expansion-panel-header")(9,"mat-panel-title")(10,"h2"),r(11,"Prerequisites"),n()()(),x(12,me,14,0,"ng-template",5),n()()(),x(13,ue,35,12)(14,fe,2,1,"span"),n()),a&2&&(s(13),M(t.unsupportedText?14:13))},dependencies:[L,A,U,te,ee,j,R,G,$,Z,H,J,X,Y,oe,ie,ne,re,ae,Q,z,K,D,N,W,q,B],styles:['.inner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.25em;text-align:center;margin:1rem 0}.inner-content[_ngcontent-%COMP%]   .textarea-container[_ngcontent-%COMP%]{padding:2rem;margin-bottom:1.5rem;background:linear-gradient(135deg,#ffecd2,#fcb69f);display:flex;align-items:center;justify-content:center;font-family:Georgia,serif}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]{position:relative;max-width:500px;width:100%;display:flex}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:25px 30px 25px 25px;border:none;border-radius:15px;background:#fff8f0;box-shadow:0 8px 32px #0000001a,inset 0 2px 4px #fffc,0 0 0 3px #e8b4a0;font-size:16px;line-height:1.6;color:#5d4037;resize:vertical;transition:all .3s ease;background-image:repeating-linear-gradient(transparent,transparent 24px,rgba(139,69,19,.1) 24px,rgba(139,69,19,.1) 26px)}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 12px 40px #00000026,inset 0 2px 4px #ffffffe6,0 0 0 4px #d4a574,0 0 20px #d4a5744d;transform:translateY(-2px)}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#a1887f;font-style:italic;opacity:.8}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .cooking-icon[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-8px;font-size:32px;background:#ff8a65;width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #ff8a654d;transition:all .3s ease;cursor:default}.inner-content[_ngcontent-%COMP%]   .textarea-wrapper[_ngcontent-%COMP%]   .cooking-icon[_ngcontent-%COMP%]:hover{transform:rotate(15deg) scale(1.1);box-shadow:0 6px 16px #ff8a6566}.inner-content[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:radial-gradient(circle at 1px 1px,rgba(139,69,19,.05) 1px,transparent 0);background-size:20px 20px;pointer-events:none;border-radius:15px}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:end;justify-content:center}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .options-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .options-fields[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{width:120px}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .options-fields[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]:first-child{margin-right:1.5rem}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-chef-wrap[_ngcontent-%COMP%]{width:120px}.inner-content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-chef-wrap[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.inner-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-bottom:1.5rem}.inner-content[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:red;font-weight:600;margin-top:1rem}.inner-content[_ngcontent-%COMP%]   .buttons-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.inner-content[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{display:flex;align-items:center}.inner-content[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f85f31;font-weight:600;margin-left:.5rem}.inner-content[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:450px;max-height:450px;margin-top:1rem}.inner-content[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%], .inner-content[_ngcontent-%COMP%]   .buttons-box[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.prompt-prereq[_ngcontent-%COMP%]{border:0!important;box-shadow:none!important}.prompt-prereq[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding-left:0!important}.result[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border-radius:8px;border:1px solid #c5c5c5;box-shadow:0 2px 4px #0000001a}.result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{text-wrap:wrap}@media (max-width: 600px){.inner-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em}.container[_ngcontent-%COMP%]{padding:20px}textarea[_ngcontent-%COMP%]{padding:20px 25px 20px 20px;font-size:14px}.cooking-icon[_ngcontent-%COMP%]{width:35px;height:35px;font-size:20px;top:12px;right:12px}}']})}}return o})();export{Ue as PromptComponent};
